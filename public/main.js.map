{"version":3,"sources":["webpack:///./js/const.js","webpack:///./js/main.js","webpack:///./js/model/basket.js","webpack:///./js/model/filter.js","webpack:///./js/model/goods.js","webpack:///./js/model/site-menu.js","webpack:///./js/presenter/basket-good.js","webpack:///./js/presenter/basket.js","webpack:///./js/presenter/breadcrumbs.js","webpack:///./js/presenter/catalog-good.js","webpack:///./js/presenter/catalog.js","webpack:///./js/presenter/filter.js","webpack:///./js/presenter/site-menu.js","webpack:///./js/utils/filter.js","webpack:///./js/utils/good.js","webpack:///./js/utils/observer.js","webpack:///./js/utils/render.js","webpack:///./js/view/abstract.js","webpack:///./js/view/basket-item.js","webpack:///./js/view/basket-popUp-delete.js","webpack:///./js/view/basket.js","webpack:///./js/view/breadcrumbs.js","webpack:///./js/view/catalog-board.js","webpack:///./js/view/catalog-item.js","webpack:///./js/view/catalog-list.js","webpack:///./js/view/catalog-pagination.js","webpack:///./js/view/catalog-popUp-add.js","webpack:///./js/view/catalog-popUp-success.js","webpack:///./js/view/catalog-section-wrapper.js","webpack:///./js/view/catalog-section.js","webpack:///./js/view/catalog-sort.js","webpack:///./js/view/filters.js","webpack:///./js/view/site-menu.js","webpack:///./js/view/smart.js","webpack:///./assets/sass/main.scss?684f","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"names":["SortByCategoryType","DEFAULT","PRICE","POPULARITY","SortByPriorityType","UP","DOWN","FilterType","ELECTRIC","ACOUSTIC","UKULELE","FilterStringAmount","FOUR","SIX","SEVEN","TWELVE","StringsAmountByType","MenuItem","CATALOG","BASKET","BreadcrumbsItem","BreadcrumbsTitle","UserAction","UPDATE_GOOD","DELETE_GOOD","UpdateType","INIT","DiscountType","GITARAHIT","SUPERGITARA","GITARA2020","goodsModel","GoodsModel","setGoods","goods","filterModel","FilterModel","siteMenuModel","SiteMenuModel","basketModel","BasketModel","siteHeaderElement","document","querySelector","siteMainElement","siteMainContainerElement","siteMenuPresenter","SiteMenuPresenter","breadcrumbsPresenter","BreadcrumbsPresenter","catalogPresenter","CatalogPresenter","init","Basket","_goodsInBasket","updateType","update","_notify","index","findIndex","good","identiferNumber","Error","slice","Observer","Filter","_activeFilter","type","stringAmount","price","filter","Goods","_goods","_filteredGoods","filteredGoods","SiteMenu","_activeItem","itemType","BasketGoodElement","basketContainer","changeData","_basketContainer","_basketModel","_changeData","_basketPopUpContainer","_handleQuantityIncClick","bind","_handleQuantityDecClick","_handleProductQuantityChange","_handleDeleteClick","_handleDeletePopUpClick","_handleToShoppingPopUpClick","_handleCloseClick","_escKeyDownHandler","_overlayClickHandler","basketCard","_basketCard","_basketItemComponent","BasketItemView","basketListComponent","render","RenderPosition","setQuantityIncHandle","setQuantityDecHandle","setProductQuantityChangeHandle","setDeleteClickHandler","remove","Object","assign","count","_basketPopUpDeleteComponent","BasketPopUpDeleteView","addEventListener","setCloseClickHandler","setToShoppingClickHandler","_removeBasketPopUpDeleteComponent","removeEventListener","evt","key","preventDefault","target","classList","contains","_currentDiscountType","_isAvailable","_currentFilter","_goodPresenter","_basketComponent","_handleDiscountClick","_handleViewAction","_handleModelEvent","BasketView","getBasket","_renderBasket","setDiscountClickHandler","addObserver","removeObserver","discountType","values","includes","destroy","actionType","updateGood","deleteGood","goodPresenter","BasketGoodPresenter","id","forEach","_renderGood","_renderGoods","Breadcrumbs","breadcrumbsContainer","_breadcrumbsContainer","_siteMenuModel","_breadcrumbsComponent","_handleSiteMenuChange","BreadcrumbsView","getMenuItem","setBreadcrumbsClickHandler","menuItem","_currentMenuItem","setMenuItem","CatalogGood","_catalogPopUpContainer","_catalogItemComponent","_catalogPopUpAddComponent","_catalogPopUpSuccessComponent","_siteMenuComponent","SiteMenuView","_handleAddToBasketClick","_handleAddToBasketPopUpClick","_handleAddToBasketPopUpSuccessClick","catalogListContainer","catalogCard","_catalogCard","CatalogItemView","setAddClickHandler","_removePopUpAddComponent","_removePopUpSuccessComponent","CatalogPopUpAddView","data","CatalogPopUpSuccessView","setToBasketClickHandler","length","addGood","GOOD_COUNT_PER_STEP","Board","mainContainer","_goodsModel","_filterModel","_mainContainer","_renderedGoodsCount","_currentSortByCategoryType","_currentSortByPriorityType","_minPaginationStep","_currentPaginationStep","_catalogPaginationComponent","_siteCatalogSectionComponent","CatalogSectionView","_siteCatalogSectionWrapperComponent","CatalogSectionWrapperView","_catalogComponent","CatalogBoardView","_catalogListComponent","CatalogListView","_filterPresenter","FilterPresenter","CatalogGoodPresenter","_handleSortByCategoryChange","_handleSortByPriorityChange","_handleMenuModel","_handlePaginationNextClick","_handlePaginationPreviousClick","_renderCatalog","_clearCatalog","resetSortByCategoryType","getFilter","getGoods","filteredGoodsByType","filteredGoodsByPrice","setFilteredGoods","sort","sortPopularityUp","sortPopularityDown","sortPriceUp","sortPriceDown","sortByCategory","sortByPriority","_basketPresenter","BasketPresenter","goodsCount","_getGoods","startIndex","endIndex","presenter","getElement","Math","ceil","add","_renderPagination","_catalogSortComponent","CatalogSortView","setSortByCategoryChangeHandler","setSortByPriorityChangeHandler","CatalogPaginationView","setNextClickHandler","setPreviousClickHandler","goodCount","_renderSort","min","filterContainer","_filterContainer","_filterComponent","_prevFilterComponent","_pricesInGoods","map","item","_minPriceInGoods","_maxPriceInGoods","max","_handleFilterTypeChange","_handleFilterStringChange","_handleFilterPriceChange","setFilterByInit","FilterView","setFilterTypeChangeHandler","setFilterStringChangeHandler","setFilterPriceChangeHandler","filterGuitarType","setFilter","filterStringType","string","Number","filterPriceType","parseInt","String","replace","minCurrent","maxCurrent","siteMenuContainer","_siteMenuContainer","setMenuClickHandler","filters","keys","PriceRange","k","i","getGuitarType","guitarTypeKeys","currentGuitarType","toLocaleLowerCase","pointA","pointB","reviewAmount","_observers","observer","push","existedObserver","event","AFTERBEGIN","BEFOREEND","BEFOREBEGIN","container","child","place","Abstract","prepend","append","before","renderTemplate","template","insertAdjacentHTML","createElement","newElement","innerHTML","firstChild","newChild","oldChild","parent","parentElement","replaceChild","component","removeElement","_element","_callback","getTemplate","createBasketItemElement","name","toLocaleString","BasketItem","_data","_handleProductQuantityChangeHandle","_deleteClickHandler","_currentValueCount","restoreHandlers","value","quantityIncClick","quantityDecClick","isNaN","productQuantityChange","deleteClick","callback","SmartView","createBasketPopUpDeleteElement","CatalogPopUpDelete","_closeClickHandler","_toShoppingClickHandler","closeClick","toShoppingClick","AbstractView","createBasketElement","isAvailable","totalPrice","DISCOUNT","GITARAHIT_10_PERCENT","GITARA2020_30_PERCENT","getTotalPrice","goodPrice","reduce","acc","getDiscountPrice","_discountType","_discountClickHandler","discountClick","createBreadcrumbsTemplate","siteMenuItem","breadcrumbsElement","element","title","breadcrumbsTitle","_breadcrumbsClickHandler","dataset","breadcrumbsType","breadcrumbsClick","createCatalogBoardTemplate","catalogBoard","createCatalogItemElement","starsCount","CatalogItem","_addClickHandler","addClick","createCatalogListElement","CatalogList","createCatalogPaginationElement","goodsCountPerStep","paginationStep","paginationCount","paginationRange","renderPagination","paginationItems","temp","join","paginationDots","CatalogPagination","_goodsCount","_goodsCountPerStep","_paginationStep","_nextClickHandler","_previousClickHandler","nextClick","previousClick","createCatalogPopUpAddElement","CatalogPopUpAdd","createCatalogPopUpSuccessElement","CatalogPopUpSuccess","_toBasketClickHandler","toBasketClick","menuType","createCatalogSectionWrapperElement","CatalogSectionWrapper","createCatalogSectionElement","CatalogSection","createCatalogSortElement","currentSortByCategoryType","currentSortByPriorityType","CatalogSort","_currentSortByCategory","_currentSortByPriority","_sortByCategoryChangeHandler","_sortByPriorityChangeHandler","sortByCategoryChange","sortByPriorityChange","parentNode","createFiltersElement","currentFilter","currentFrom","currentTo","filteredGuitarsByType","stringAmountAvailableList","Array","from","Set","guitarKeys","stringKeys","typeGuitarKeys","typeGuitarValues","typeStringsValues","availableList","Filters","_filterPriceChangeHandler","_filterGuitarTypeChangeHandler","_filterStringAmountChangeHandler","optionsGuitarTypeArray","querySelectorAll","checkbox","checked","filterAmountStrings","filterTypeGuitar","filterTypeChange","optionsStringAmountArray","filterStringChange","filterPriceChange","optionsPriceChangeArray","input","createSiteMenuTemplate","goodsInBasket","total","_menuClickHandler","tagName","menuClick","Smart","justDataUpdating","updateElement","prevElement"],"mappings":"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","file":"main.js","sourcesContent":["export const SortByCategoryType = {\n  DEFAULT: `default`,\n  PRICE: `price`,\n  POPULARITY: `popularity`\n};\n\nexport const SortByPriorityType = {\n  DEFAULT: `default`,\n  UP: `up`,\n  DOWN: `down`\n};\n\nexport const FilterType = {\n  ELECTRIC: `электрогитара`,\n  ACOUSTIC: `акустическая гитара`,\n  UKULELE: `укулеле`\n};\n\nexport const FilterStringAmount = {\n  FOUR: 4,\n  SIX: 6,\n  SEVEN: 7,\n  TWELVE: 12,\n};\n\nexport const StringsAmountByType = {\n  ELECTRIC: [4, 6, 7],\n  ACOUSTIC: [6, 7, 12],\n  UKULELE: [4]\n};\n\nexport const MenuItem = {\n  CATALOG: `CATALOG`,\n  BASKET: `BASKET`\n};\n\nexport const BreadcrumbsItem = {\n  CATALOG: `Каталог`,\n  BASKET: `Оформляем`\n};\n\nexport const BreadcrumbsTitle = {\n  CATALOG: `Каталог гитар`,\n  BASKET: `Корзина`\n};\n\nexport const UserAction = {\n  UPDATE_GOOD: `UPDATE_GOOD`,\n  DELETE_GOOD: `DELETE_GOOD`\n};\n\nexport const UpdateType = {\n  INIT: `INIT`\n};\n\nexport const DiscountType = {\n  DEFAULT: `DEFAULT`,\n  GITARAHIT: `GITARAHIT`,\n  SUPERGITARA: `SUPERGITARA`,\n  GITARA2020: `GITARA2020`\n};\n","import '../assets/sass/main.scss';\nimport SiteMenuPresenter from \"./presenter/site-menu.js\";\nimport CatalogPresenter from \"./presenter/catalog.js\";\nimport BreadcrumbsPresenter from \"./presenter/breadcrumbs.js\";\nimport GoodsModel from \"./model/goods.js\";\nimport FilterModel from \"./model/filter.js\";\nimport SiteMenuModel from \"./model/site-menu.js\";\nimport BasketModel from \"./model/basket.js\";\n\nimport goods from \"./mock/goods.json\";\n\nconst goodsModel = new GoodsModel();\ngoodsModel.setGoods(goods);\n\nconst filterModel = new FilterModel();\nconst siteMenuModel = new SiteMenuModel();\nconst basketModel = new BasketModel();\n\nconst siteHeaderElement = document.querySelector(`.page-header`);\nconst siteMainElement = document.querySelector(`.page-main`);\nconst siteMainContainerElement = siteMainElement.querySelector(`.container`);\n\nconst siteMenuPresenter = new SiteMenuPresenter(siteHeaderElement, siteMenuModel, basketModel);\nconst breadcrumbsPresenter = new BreadcrumbsPresenter(siteMainContainerElement, siteMenuModel);\nconst catalogPresenter = new CatalogPresenter(siteMainContainerElement, goodsModel, filterModel, siteMenuModel, basketModel);\n\nsiteMenuPresenter.init();\nbreadcrumbsPresenter.init();\ncatalogPresenter.init();\n","\nimport Observer from \"../utils/observer.js\";\n\nexport default class Basket extends Observer {\n  constructor() {\n    super();\n    this._goodsInBasket = [];\n  }\n\n  setBasket(updateType, update) {\n    this._goodsInBasket = update;\n    this._notify(updateType);\n  }\n\n  getBasket() {\n    return this._goodsInBasket;\n  }\n\n  updateGood(updateType, update) {\n    const index = this._goodsInBasket.findIndex((good) => good.identiferNumber === update.identiferNumber);\n\n    if (index === -1) {\n      throw new Error(`Can't update unexisting task`);\n    }\n\n    this._goodsInBasket = [\n      ...this._goodsInBasket.slice(0, index),\n      update,\n      ...this._goodsInBasket.slice(index + 1)\n    ];\n\n    this._notify(updateType, update);\n  }\n\n  addGood(updateType, update) {\n    this._goodsInBasket = [\n      update,\n      ...this._goodsInBasket\n    ];\n\n    this._notify(updateType, update);\n  }\n\n  deleteGood(updateType, update) {\n    const index = this._goodsInBasket.findIndex((good) => good.identiferNumber === update.identiferNumber);\n\n    if (index === -1) {\n      throw new Error(`Can't delete unexisting task`);\n    }\n\n    this._goodsInBasket = [\n      ...this._goodsInBasket.slice(0, index),\n      ...this._goodsInBasket.slice(index + 1)\n    ];\n\n    this._notify(updateType);\n  }\n}\n","import Observer from \"../utils/observer.js\";\n\nexport default class Filter extends Observer {\n  constructor() {\n    super();\n    this._activeFilter = {\n      type: [],\n      stringAmount: [],\n      price: []\n    };\n  }\n\n  setFilter(filter, type) {\n    this._activeFilter[type] = filter;\n    this._notify(filter);\n  }\n\n  setFilterByInit(filter, type) {\n    this._activeFilter[type] = filter;\n  }\n\n  getFilter() {\n    return this._activeFilter;\n  }\n\n}\n","\nimport Observer from \"../utils/observer.js\";\n\nexport default class Goods extends Observer {\n  constructor() {\n    super();\n    this._goods = [];\n    this._filteredGoods = [];\n  }\n\n  setGoods(goods) {\n    this._goods = goods.slice();\n  }\n\n  getGoods() {\n    return this._goods;\n  }\n\n  setFilteredGoods(filteredGoods) {\n    this._filteredGoods = filteredGoods.slice();\n  }\n\n  getFilteredGoods() {\n    return this._filteredGoods;\n  }\n}\n","import Observer from \"../utils/observer.js\";\nimport {MenuItem} from \"../const.js\";\n\nexport default class SiteMenu extends Observer {\n  constructor() {\n    super();\n    this._activeItem = MenuItem.CATALOG;\n  }\n\n  setMenuItem(itemType) {\n    this._activeItem = itemType;\n    this._notify(itemType);\n  }\n\n  getMenuItem() {\n    return this._activeItem;\n  }\n}\n","import BasketItemView from \"../view/basket-item.js\";\nimport BasketPopUpDeleteView from \"../view/basket-popUp-delete.js\";\nimport {render, RenderPosition, remove} from \"../utils/render.js\";\nimport {UserAction, UpdateType} from \"../const.js\";\n\nexport default class BasketGoodElement {\n  constructor(basketContainer, basketModel, changeData) {\n    this._basketContainer = basketContainer;\n    this._basketModel = basketModel;\n    this._changeData = changeData;\n\n    this._basketPopUpContainer = document.querySelector(`body`);\n\n    this._handleQuantityIncClick = this._handleQuantityIncClick.bind(this);\n    this._handleQuantityDecClick = this._handleQuantityDecClick.bind(this);\n    this._handleProductQuantityChange = this._handleProductQuantityChange.bind(this);\n    this._handleDeleteClick = this._handleDeleteClick.bind(this);\n\n    this._handleDeletePopUpClick = this._handleDeletePopUpClick.bind(this);\n    this._handleToShoppingPopUpClick = this._handleToShoppingPopUpClick.bind(this);\n    this._handleCloseClick = this._handleCloseClick.bind(this);\n    this._escKeyDownHandler = this._escKeyDownHandler.bind(this);\n    this._overlayClickHandler = this._overlayClickHandler.bind(this);\n  }\n\n  init(basketCard) {\n    this._basketCard = basketCard;\n\n    this._basketItemComponent = new BasketItemView(this._basketCard);\n\n    const basketListComponent = this._basketContainer.querySelector(`.product__list`);\n    render(basketListComponent, this._basketItemComponent, RenderPosition.BEFOREEND);\n\n    this._basketItemComponent.setQuantityIncHandle(this._handleQuantityIncClick);\n    this._basketItemComponent.setQuantityDecHandle(this._handleQuantityDecClick);\n    this._basketItemComponent.setProductQuantityChangeHandle(this._handleProductQuantityChange);\n    this._basketItemComponent.setDeleteClickHandler(this._handleDeleteClick);\n  }\n\n  destroy() {\n    remove(this._basketItemComponent);\n  }\n\n  _handleQuantityIncClick(update) {\n    this._changeData(\n        UserAction.UPDATE_GOOD,\n        UpdateType.INIT,\n        Object.assign({}, this._basketCard, {count: update})\n    );\n  }\n\n  _handleQuantityDecClick(update) {\n    if (update < 1) {\n      this._handleDeleteClick();\n      return;\n    }\n    this._changeData(\n        UserAction.UPDATE_GOOD,\n        UpdateType.INIT,\n        Object.assign({}, this._basketCard, {count: update})\n    );\n  }\n\n  _handleProductQuantityChange(update) {\n    if (update === 0) {\n      this._handleDeleteClick();\n      return;\n    }\n    this._changeData(\n        UserAction.UPDATE_GOOD,\n        UpdateType.INIT,\n        Object.assign({}, this._basketCard, {count: update})\n    );\n  }\n\n  _handleDeleteClick() {\n    this._basketPopUpDeleteComponent = new BasketPopUpDeleteView(this._basketCard);\n\n    render(this._basketPopUpContainer, this._basketPopUpDeleteComponent, RenderPosition.AFTERBEGIN);\n    document.addEventListener(`keydown`, this._escKeyDownHandler);\n    document.addEventListener(`click`, this._overlayClickHandler);\n\n    this._basketPopUpDeleteComponent.setCloseClickHandler(this._handleCloseClick);\n    this._basketPopUpDeleteComponent.setDeleteClickHandler(this._handleDeletePopUpClick);\n    this._basketPopUpDeleteComponent.setToShoppingClickHandler(this._handleToShoppingPopUpClick);\n\n  }\n\n  _handleDeletePopUpClick() {\n    this._changeData(\n        UserAction.DELETE_GOOD,\n        UpdateType.INIT,\n        Object.assign({}, this._basketCard)\n    );\n    this._removeBasketPopUpDeleteComponent();\n  }\n\n  _removeBasketPopUpDeleteComponent() {\n    remove(this._basketPopUpDeleteComponent);\n    document.removeEventListener(`keydown`, this._escKeyDownHandler);\n    document.removeEventListener(`keydown`, this._overlayClickHandler);\n  }\n\n  _escKeyDownHandler(evt) {\n    if (evt.key === `Escape` || evt.key === `Esc`) {\n      evt.preventDefault();\n\n      if (this._basketPopUpDeleteComponent !== null) {\n        this._removeBasketPopUpDeleteComponent();\n      }\n    }\n  }\n\n  _overlayClickHandler(evt) {\n    if (evt.target.classList.contains(`overlay`)) {\n      evt.preventDefault();\n\n      if (this._basketPopUpDeleteComponent !== null) {\n        this._removeBasketPopUpDeleteComponent();\n      }\n    }\n  }\n\n  _handleCloseClick() {\n    if (this._basketPopUpDeleteComponent !== null) {\n      this._removeBasketPopUpDeleteComponent();\n    }\n  }\n\n  _handleToShoppingPopUpClick() {\n    this._removeBasketPopUpDeleteComponent();\n  }\n}\n","import BasketView from \"../view/basket.js\";\nimport BasketGoodPresenter from \"../presenter/basket-good.js\";\nimport {render, RenderPosition, remove} from \"../utils/render.js\";\nimport {UserAction, UpdateType, DiscountType} from \"../const.js\";\n\nexport default class Basket {\n  constructor(basketContainer, basketModel) {\n    this._basketContainer = basketContainer;\n    this._basketModel = basketModel;\n    this._currentDiscountType = DiscountType.DEFAULT;\n    this._isAvailable = true;\n    this._currentFilter = null;\n    this._goodPresenter = {};\n    this._basketComponent = null;\n    this._handleDiscountClick = this._handleDiscountClick.bind(this);\n    this._handleViewAction = this._handleViewAction.bind(this);\n    this._handleModelEvent = this._handleModelEvent.bind(this);\n  }\n\n  init() {\n    this._basketComponent = new BasketView(this._basketModel.getBasket(), this._currentDiscountType, this._isAvailable);\n\n    render(this._basketContainer, this._basketComponent, RenderPosition.BEFOREEND);\n\n    this._renderBasket();\n\n    this._basketComponent.setDiscountClickHandler(this._handleDiscountClick);\n    this._basketModel.addObserver(this._handleModelEvent);\n  }\n\n  destroy() {\n    remove(this._basketComponent);\n\n    this._basketComponent = null;\n    this._basketModel.removeObserver(this._handleModelEvent);\n  }\n\n  _handleDiscountClick(discountType) {\n    if (this._currentDiscountType === discountType) {\n      return;\n    }\n    if (!Object.values(DiscountType).includes(discountType)) {\n      this._isAvailable = false;\n    } else {\n      this._isAvailable = true;\n    }\n\n    this._currentDiscountType = discountType;\n\n    this.destroy();\n    this.init();\n  }\n\n  // _handleModelEvent() {\n  //   this.init();\n  // }\n\n  _handleViewAction(actionType, updateType, update) {\n    switch (actionType) {\n      case UserAction.UPDATE_GOOD:\n        this._basketModel.updateGood(updateType, update);\n        break;\n      case UserAction.DELETE_GOOD:\n        this._basketModel.deleteGood(updateType, update);\n        break;\n    }\n  }\n\n  _handleModelEvent(updateType) {\n    switch (updateType) {\n      case UpdateType.INIT:\n        this.destroy();\n        this.init();\n        break;\n    }\n  }\n\n  _renderGood(good) {\n    const goodPresenter = new BasketGoodPresenter(this._basketContainer, this._basketModel, this._handleViewAction);\n    goodPresenter.init(good);\n    this._goodPresenter[good.id] = goodPresenter;\n  }\n\n  _renderGoods(goods) {\n    goods.forEach((good) => this._renderGood(good));\n  }\n\n  _renderBasket() {\n    const goods = this._basketModel.getBasket();\n    this._renderGoods(goods);\n  }\n}\n","import BreadcrumbsView from \"../view/breadcrumbs.js\";\nimport {render, RenderPosition, remove} from \"../utils/render.js\";\n\nexport default class Breadcrumbs {\n  constructor(breadcrumbsContainer, siteMenuModel) {\n    this._breadcrumbsContainer = breadcrumbsContainer;\n    this._siteMenuModel = siteMenuModel;\n\n    this._breadcrumbsComponent = null;\n\n    this._handleModelEvent = this._handleModelEvent.bind(this);\n    this._handleSiteMenuChange = this._handleSiteMenuChange.bind(this);\n  }\n\n  init() {\n    this._breadcrumbsComponent = new BreadcrumbsView(this._siteMenuModel.getMenuItem());\n\n    render(this._breadcrumbsContainer, this._breadcrumbsComponent, RenderPosition.AFTERBEGIN);\n    this._breadcrumbsComponent.setBreadcrumbsClickHandler(this._handleSiteMenuChange);\n\n    this._siteMenuModel.addObserver(this._handleModelEvent);\n  }\n\n  destroy() {\n    remove(this._breadcrumbsComponent);\n\n    this._breadcrumbsComponent = null;\n    this._siteMenuModel.removeObserver(this._handleModelEvent);\n  }\n\n  _handleModelEvent() {\n    this.destroy();\n    this.init();\n  }\n\n  _handleSiteMenuChange(menuItem) {\n    this._currentMenuItem = this._siteMenuModel.getMenuItem();\n\n    if (this._currentMenuItem === menuItem || menuItem === null) {\n      return;\n    }\n\n    this._siteMenuModel.setMenuItem(menuItem);\n  }\n}\n","import CatalogItemView from \"../view/catalog-item.js\";\nimport CatalogPopUpAddView from \"../view/catalog-popUp-add.js\";\nimport CatalogPopUpSuccessView from \"../view/catalog-popUp-success.js\";\nimport SiteMenuView from \"../view/site-menu.js\";\nimport {render, RenderPosition, remove} from \"../utils/render.js\";\nimport {UserAction, UpdateType} from \"../const.js\";\n\nexport default class CatalogGood {\n  constructor(siteMenuModel, basketModel, changeData) {\n    this._changeData = changeData;\n    this._catalogPopUpContainer = document.querySelector(`body`);\n    this._siteMenuModel = siteMenuModel;\n    this._basketModel = basketModel;\n\n    this._catalogItemComponent = null;\n    this._catalogPopUpAddComponent = null;\n    this._catalogPopUpSuccessComponent = null;\n\n\n    this._siteMenuComponent = new SiteMenuView();\n\n    this._handleAddToBasketClick = this._handleAddToBasketClick.bind(this);\n    this._handleAddToBasketPopUpClick = this._handleAddToBasketPopUpClick.bind(this);\n    this._handleAddToBasketPopUpSuccessClick = this._handleAddToBasketPopUpSuccessClick.bind(this);\n    this._handleToShoppingPopUpClick = this._handleToShoppingPopUpClick.bind(this);\n    this._handleCloseClick = this._handleCloseClick.bind(this);\n    this._escKeyDownHandler = this._escKeyDownHandler.bind(this);\n    this._overlayClickHandler = this._overlayClickHandler.bind(this);\n  }\n\n  init(catalogListContainer, catalogCard) {\n    this._catalogCard = catalogCard;\n\n    this._catalogItemComponent = new CatalogItemView(catalogCard);\n    render(catalogListContainer, this._catalogItemComponent, RenderPosition.BEFOREEND);\n\n    this._catalogItemComponent.setAddClickHandler(this._handleAddToBasketClick);\n\n  }\n\n  destroy() {\n    remove(this._catalogItemComponent);\n  }\n\n  _removePopUpAddComponent() {\n    remove(this._catalogPopUpAddComponent);\n    document.removeEventListener(`keydown`, this._escKeyDownHandler);\n    document.removeEventListener(`keydown`, this._overlayClickHandler);\n  }\n\n  _removePopUpSuccessComponent() {\n    remove(this._catalogPopUpSuccessComponent);\n    document.removeEventListener(`keydown`, this._escKeyDownHandler);\n    document.removeEventListener(`keydown`, this._overlayClickHandler);\n  }\n\n  _escKeyDownHandler(evt) {\n    if (evt.key === `Escape` || evt.key === `Esc`) {\n      evt.preventDefault();\n\n      if (this._catalogPopUpAddComponent !== null) {\n        this._removePopUpAddComponent();\n      }\n      if (this._catalogPopUpSuccessComponent !== null) {\n        this._removePopUpSuccessComponent();\n      }\n    }\n  }\n\n  _overlayClickHandler(evt) {\n    if (evt.target.classList.contains(`overlay`)) {\n      evt.preventDefault();\n\n      if (this._catalogPopUpAddComponent !== null) {\n        this._removePopUpAddComponent();\n      }\n      if (this._catalogPopUpSuccessComponent !== null) {\n        this._removePopUpSuccessComponent();\n      }\n    }\n  }\n\n  _handleCloseClick() {\n    if (this._catalogPopUpAddComponent !== null) {\n      this._removePopUpAddComponent();\n    }\n    if (this._catalogPopUpSuccessComponent !== null) {\n      this._removePopUpSuccessComponent();\n    }\n  }\n\n  _handleAddToBasketClick() {\n    this._catalogPopUpAddComponent = new CatalogPopUpAddView(this._catalogCard);\n\n    this._catalogPopUpAddComponent.setCloseClickHandler(this._handleCloseClick);\n    this._catalogPopUpAddComponent.setAddClickHandler(this._handleAddToBasketPopUpClick);\n\n    render(this._catalogPopUpContainer, this._catalogPopUpAddComponent, RenderPosition.AFTERBEGIN);\n    document.addEventListener(`keydown`, this._escKeyDownHandler);\n    document.addEventListener(`click`, this._overlayClickHandler);\n  }\n\n  _handleAddToBasketPopUpClick(data) {\n    this._removePopUpAddComponent();\n    this._catalogPopUpSuccessComponent = new CatalogPopUpSuccessView();\n\n    this._catalogPopUpSuccessComponent.setCloseClickHandler(this._handleCloseClick);\n    this._catalogPopUpSuccessComponent.setToBasketClickHandler(this._handleAddToBasketPopUpSuccessClick);\n    this._catalogPopUpSuccessComponent.setToShoppingClickHandler(this._handleToShoppingPopUpClick);\n    this._catalogPopUpSuccessComponent.setCloseClickHandler(this._handleCloseClick);\n\n    render(this._catalogPopUpContainer, this._catalogPopUpSuccessComponent, RenderPosition.AFTERBEGIN);\n    document.addEventListener(`keydown`, this._escKeyDownHandler);\n    document.addEventListener(`click`, this._overlayClickHandler);\n\n    this._goods = this._basketModel.getBasket();\n\n    const index = this._goods.findIndex((good) => good.identiferNumber === data.identiferNumber);\n\n    if (index === -1 || this._goods.length === 0) {\n      this._basketModel.addGood(UpdateType.INIT, Object.assign({}, data, {count: 1}));\n      return;\n    }\n\n    let count = this._goods[index].count;\n    count++;\n\n    this._basketModel.updateGood(UserAction.UPDATE_GOOD, Object.assign({}, data, {count}));\n  }\n\n  _handleAddToBasketPopUpSuccessClick(menuItem) {\n    this._currentMenuItem = this._siteMenuModel.getMenuItem();\n\n    // this._siteMenuComponent.getElement()\n    //     .querySelector(`[data-menu-type=\"${this._currentMenuItem}\"]`)\n    //     .parentElement.classList.remove(`site-list__item--active`);\n\n    // this._siteMenuComponent.getElement()\n    //     .querySelector(`[data-menu-type=\"${menuItem}\"]`)\n    //     .parentElement.classList.add(`site-list__item--active`);\n\n    this._siteMenuModel.setMenuItem(menuItem);\n    this._removePopUpSuccessComponent();\n  }\n\n  _handleToShoppingPopUpClick() {\n    this._removePopUpSuccessComponent();\n  }\n}\n","import CatalogBoardView from \"../view/catalog-board.js\";\nimport CatalogSortView from \"../view/catalog-sort.js\";\nimport CatalogListView from \"../view/catalog-list.js\";\nimport CatalogPaginationView from \"../view/catalog-pagination.js\";\nimport CatalogSectionWrapperView from \"../view/catalog-section-wrapper.js\";\nimport CatalogSectionView from \"../view/catalog-section.js\";\n\nimport CatalogGoodPresenter from \"../presenter/catalog-good.js\";\nimport BasketPresenter from \"../presenter/basket.js\";\nimport FilterPresenter from \"../presenter/filter.js\";\n\nimport {render, RenderPosition, remove} from \"../utils/render.js\";\nimport {sortPriceUp, sortPriceDown, sortPopularityUp, sortPopularityDown} from \"../utils/good.js\";\nimport {SortByCategoryType, SortByPriorityType} from \"../const.js\";\nimport {filteredGoodsByType, filteredGoodsByPrice} from \"../utils/filter.js\";\nimport {MenuItem} from \"../const.js\";\n\nconst GOOD_COUNT_PER_STEP = 9;\n\nexport default class Board {\n  constructor(mainContainer, goodsModel, filterModel, siteMenuModel, basketModel) {\n    this._goodsModel = goodsModel;\n    this._filterModel = filterModel;\n    this._siteMenuModel = siteMenuModel;\n    this._basketModel = basketModel;\n    this._mainContainer = mainContainer;\n    this._renderedGoodsCount = GOOD_COUNT_PER_STEP;\n    this._currentSortByCategoryType = SortByCategoryType.DEFAULT;\n    this._currentSortByPriorityType = SortByPriorityType.DEFAULT;\n    this._goods = {};\n    this._minPaginationStep = 1;\n    this._currentPaginationStep = 1;\n\n    this._catalogPaginationComponent = null;\n    this._siteCatalogSectionComponent = new CatalogSectionView();\n    this._siteCatalogSectionWrapperComponent = new CatalogSectionWrapperView();\n    this._catalogComponent = new CatalogBoardView();\n    this._catalogListComponent = new CatalogListView();\n\n    this._filterPresenter = new FilterPresenter(this._siteCatalogSectionWrapperComponent, this._filterModel, this._goodsModel);\n    this._goodPresenter = new CatalogGoodPresenter(this._siteMenuModel, this._handleViewAction);\n\n    this._handleSortByCategoryChange = this._handleSortByCategoryChange.bind(this);\n    this._handleSortByPriorityChange = this._handleSortByPriorityChange.bind(this);\n    this._handleModelEvent = this._handleModelEvent.bind(this);\n    this._handleMenuModel = this._handleMenuModel.bind(this);\n    this._handlePaginationNextClick = this._handlePaginationNextClick.bind(this);\n    this._handlePaginationPreviousClick = this._handlePaginationPreviousClick.bind(this);\n    this._siteMenuModel.addObserver(this._handleMenuModel);\n  }\n\n  init() {\n    render(this._mainContainer, this._siteCatalogSectionComponent, RenderPosition.BEFOREEND);\n    render(this._siteCatalogSectionComponent, this._siteCatalogSectionWrapperComponent, RenderPosition.BEFOREEND);\n    render(this._siteCatalogSectionWrapperComponent, this._catalogComponent, RenderPosition.BEFOREEND);\n    render(this._catalogComponent, this._catalogListComponent, RenderPosition.BEFOREEND);\n\n    this._goodsModel.addObserver(this._handleModelEvent);\n    this._filterModel.addObserver(this._handleModelEvent);\n\n    this._renderCatalog();\n  }\n\n  destroy() {\n    this._clearCatalog({resetSortByCategoryType: true});\n\n    remove(this._catalogListComponent);\n    remove(this._catalogComponent);\n    remove(this._siteCatalogSectionComponent);\n    remove(this._siteCatalogSectionWrapperComponent);\n\n    this._goodsModel.removeObserver(this._handleModelEvent);\n    this._filterModel.removeObserver(this._handleModelEvent);\n  }\n\n  _getGoods() {\n    const filter = this._filterModel.getFilter();\n    const goods = this._goodsModel.getGoods();\n\n    let filteredGoods = goods.slice(0)\n        .filter((good) => filteredGoodsByType(good.type, filter.type))\n        .filter((good) => filteredGoodsByType(good.stringAmount, filter.stringAmount))\n        .filter((good) => filteredGoodsByPrice(good.price, filter.price));\n\n    this._goodsModel.setFilteredGoods(filteredGoods);\n\n    switch (this._currentSortByCategoryType) {\n      case SortByCategoryType.DEFAULT:\n        if (this._currentSortByPriorityType === SortByPriorityType.UP) {\n          this._currentSortByCategoryType = SortByCategoryType.PRICE;\n          return filteredGoods.sort(sortPopularityUp);\n        }\n        if (this._currentSortByPriorityType === SortByPriorityType.DOWN) {\n          this._currentSortByCategoryType = SortByCategoryType.PRICE;\n          return filteredGoods.sort(sortPopularityDown);\n        }\n        break;\n      case SortByCategoryType.PRICE:\n        if (this._currentSortByPriorityType === SortByPriorityType.DEFAULT) {\n          this._currentSortByPriorityType = SortByPriorityType.UP;\n          return filteredGoods.sort(sortPriceUp);\n        }\n        if (this._currentSortByPriorityType === SortByPriorityType.UP) {\n          return filteredGoods.sort(sortPriceUp);\n        }\n        if (this._currentSortByPriorityType === SortByPriorityType.DOWN) {\n          return filteredGoods.sort(sortPriceDown);\n        }\n        break;\n      case SortByCategoryType.POPULARITY:\n        if (this._currentSortByPriorityType === SortByPriorityType.DEFAULT) {\n          this._currentSortByPriorityType = SortByPriorityType.UP;\n          return filteredGoods.sort(sortPopularityUp);\n        }\n        if (this._currentSortByPriorityType === SortByPriorityType.UP) {\n          return filteredGoods.sort(sortPopularityUp);\n        }\n        if (this._currentSortByPriorityType === SortByPriorityType.DOWN) {\n          return filteredGoods.sort(sortPopularityDown);\n        }\n        break;\n    }\n\n    return filteredGoods;\n  }\n\n  _handleSortByCategoryChange(sortByCategory) {\n    if (this._currentSortByCategoryType === sortByCategory) {\n      return;\n    }\n\n    this._currentSortByCategoryType = sortByCategory;\n\n    this._clearCatalog();\n    this._renderCatalog();\n  }\n\n  _handleSortByPriorityChange(sortByPriority) {\n    if (this._currentSortByPriorityType === sortByPriority) {\n      return;\n    }\n\n    this._currentSortByPriorityType = sortByPriority;\n\n    this._clearCatalog();\n    this._renderCatalog();\n  }\n\n  _handleModelEvent() {\n    this._clearCatalog();\n    this._renderCatalog();\n  }\n\n  _handleMenuModel(menuItem) {\n    switch (menuItem) {\n      case MenuItem.CATALOG:\n        this.init();\n        this._basketPresenter.destroy();\n        break;\n      case MenuItem.BASKET:\n        this.destroy();\n\n        const siteMainElement = document.querySelector(`.page-main`);\n        const siteMainContainerElement = siteMainElement.querySelector(`.container`);\n\n        this._basketPresenter = new BasketPresenter(siteMainContainerElement, this._basketModel);\n        this._basketPresenter.init();\n        break;\n    }\n  }\n\n  _handlePaginationNextClick() {\n    const goodsCount = this._getGoods().length;\n\n    this._currentPaginationStep++;\n\n    const startIndex = GOOD_COUNT_PER_STEP * this._currentPaginationStep - GOOD_COUNT_PER_STEP;\n    const endIndex = GOOD_COUNT_PER_STEP * this._currentPaginationStep;\n\n    const goods = this._getGoods().slice(startIndex, endIndex);\n\n    Object\n        .values(this._goods)\n        .forEach((presenter) => presenter.destroy());\n    this._goods = {};\n\n    this._renderGoods(goods);\n\n    if (this._currentPaginationStep > this._minPaginationStep) {\n      this._catalogPaginationComponent.getElement()\n          .querySelector(`.pagination__item--button-previous`)\n          .classList.remove(`pagination__item--hide`);\n    }\n\n    if (GOOD_COUNT_PER_STEP > goodsCount) {\n      remove(this._catalogPaginationComponent);\n    }\n\n    if (this._currentPaginationStep >= Math.ceil(goodsCount / this._currentPaginationStep)) {\n      this._catalogPaginationComponent.getElement()\n          .querySelector(`.pagination__item--button-next`)\n          .classList.add(`pagination__item--hide`);\n    }\n\n    remove(this._catalogPaginationComponent);\n    this._renderPagination(this._renderedGoodsCount);\n  }\n\n  _handlePaginationPreviousClick() {\n    const goodsCount = this._getGoods().length;\n\n    this._currentPaginationStep--;\n\n    const startIndex = GOOD_COUNT_PER_STEP * this._currentPaginationStep - GOOD_COUNT_PER_STEP;\n    const endIndex = GOOD_COUNT_PER_STEP * this._currentPaginationStep;\n\n    const goods = this._getGoods().slice(startIndex, endIndex);\n\n    Object\n        .values(this._goods)\n        .forEach((presenter) => presenter.destroy());\n    this._goods = {};\n\n    this._renderGoods(goods);\n\n    if (GOOD_COUNT_PER_STEP > goodsCount) {\n      remove(this._catalogPaginationComponent);\n    }\n\n    if (this._currentPaginationStep === this._minPaginationStep) {\n      this._catalogPaginationComponent.getElement()\n          .querySelector(`.pagination__item--button-previous`)\n          .classList.add(`pagination__item--hide`);\n    }\n\n    if (this._currentPaginationStep <= Math.ceil(goodsCount / this._currentPaginationStep)) {\n      this._catalogPaginationComponent.getElement()\n          .querySelector(`.pagination__item--button-next`)\n          .classList.remove(`pagination__item--hide`);\n    }\n\n    remove(this._catalogPaginationComponent);\n    this._renderPagination(this._renderedGoodsCount);\n  }\n\n  _renderSort() {\n    if (this._catalogSortComponent !== null) {\n      this._catalogSortComponent = null;\n    }\n\n    this._catalogSortComponent = new CatalogSortView(this._currentSortByCategoryType, this._currentSortByPriorityType);\n    this._catalogSortComponent.setSortByCategoryChangeHandler(this._handleSortByCategoryChange);\n    this._catalogSortComponent.setSortByPriorityChangeHandler(this._handleSortByPriorityChange);\n\n    render(this._catalogComponent, this._catalogSortComponent, RenderPosition.AFTERBEGIN);\n  }\n\n  _renderGood(good) {\n    const goodPresenter = new CatalogGoodPresenter(this._siteMenuModel, this._basketModel);\n    goodPresenter.init(this._catalogListComponent, good);\n    this._goods[good.id] = goodPresenter;\n  }\n\n  _renderGoods(goods) {\n    goods.forEach((good) => this._renderGood(good));\n  }\n\n  _renderPagination() {\n    const goodsCount = this._getGoods().length;\n\n    this._catalogPaginationComponent = new CatalogPaginationView(goodsCount, GOOD_COUNT_PER_STEP, this._currentPaginationStep);\n    this._catalogPaginationComponent.setNextClickHandler(this._handlePaginationNextClick);\n    this._catalogPaginationComponent.setPreviousClickHandler(this._handlePaginationPreviousClick);\n\n    render(this._catalogComponent, this._catalogPaginationComponent, RenderPosition.BEFOREEND);\n\n    if (this._currentPaginationStep <= 1) {\n      this._catalogPaginationComponent.getElement()\n          .querySelector(`.pagination__item--button-previous`)\n          .classList.add(`pagination__item--hide`);\n    }\n\n    if (this._currentPaginationStep * GOOD_COUNT_PER_STEP >= goodsCount) {\n      this._catalogPaginationComponent.getElement()\n          .querySelector(`.pagination__item--button-next`)\n          .classList.add(`pagination__item--hide`);\n    }\n  }\n\n  _clearCatalog({resetSortByCategoryType = false} = {}) {\n    Object\n        .values(this._goods)\n        .forEach((presenter) => presenter.destroy());\n    this._goods = {};\n\n    this._filterPresenter.destroy();\n\n    remove(this._catalogSortComponent);\n    remove(this._catalogPaginationComponent);\n\n    if (resetSortByCategoryType) {\n      this._currentSortByCategoryType = SortByCategoryType.DEFAULT;\n      this._currentSortByPriorityType = SortByPriorityType.DEFAULT;\n    }\n  }\n\n  _renderCatalog() {\n    const goods = this._getGoods();\n    const goodCount = goods.length;\n\n    if (this._filterPresenter !== null) {\n      this._filterPresenter.init();\n    }\n\n    this._renderSort();\n    this._renderGoods(goods.slice(0, Math.min(goodCount, GOOD_COUNT_PER_STEP)));\n\n    if (goodCount > GOOD_COUNT_PER_STEP) {\n      this._renderPagination();\n    }\n  }\n}\n","import FilterView from \"../view/filters.js\";\nimport {render, RenderPosition, remove} from \"../utils/render.js\";\n\nexport default class Filter {\n  constructor(filterContainer, filterModel, goodsModel) {\n    this._filterContainer = filterContainer;\n    this._filterModel = filterModel;\n    this._goodsModel = goodsModel;\n\n    this._filterComponent = null;\n    this._prevFilterComponent = null;\n\n    this._pricesInGoods = [];\n\n    this._pricesInGoods = this._goodsModel.getGoods()\n    .map((item) => item.price);\n\n    this._minPriceInGoods = Math.min(...this._pricesInGoods);\n    this._maxPriceInGoods = Math.max(...this._pricesInGoods);\n\n    this._handleFilterTypeChange = this._handleFilterTypeChange.bind(this);\n    this._handleFilterStringChange = this._handleFilterStringChange.bind(this);\n    this._handleFilterPriceChange = this._handleFilterPriceChange.bind(this);\n\n    this._filterModel.setFilterByInit([this._minPriceInGoods, this._maxPriceInGoods], `price`);\n  }\n\n  init() {\n    this._currentFilter = this._filterModel.getFilter();\n    this._goods = this._goodsModel.getGoods();\n\n    this._prevFilterComponent = this._filterComponent;\n\n    this._filterComponent = new FilterView(this._currentFilter, this._goods);\n    this._filterComponent.setFilterTypeChangeHandler(this._handleFilterTypeChange);\n    this._filterComponent.setFilterStringChangeHandler(this._handleFilterStringChange);\n    this._filterComponent.setFilterPriceChangeHandler(this._handleFilterPriceChange);\n\n    render(this._filterContainer, this._filterComponent, RenderPosition.AFTERBEGIN);\n\n  }\n\n  destroy() {\n    remove(this._filterComponent);\n\n    this._filterComponent = null;\n  }\n\n  _handleFilterTypeChange(filterGuitarType) {\n    if (this._prevFilterComponent === 0) {\n      return;\n    }\n\n    this._filterModel.setFilter(filterGuitarType, `type`);\n  }\n\n  _handleFilterStringChange(filterStringType) {\n    if (this._prevFilterComponent === 0) {\n      return;\n    }\n\n    filterStringType = filterStringType.map((string) => Number(string));\n\n    this._filterModel.setFilter(filterStringType, `stringAmount`);\n  }\n\n  _handleFilterPriceChange(filterPriceType) {\n    if (this._prevFilterComponent === 0) {\n      return;\n    }\n\n    filterPriceType = filterPriceType.map((filter) => {\n      return parseInt(String(filter).replace(/\\s+/g, ``), 10);\n    });\n\n    const [minCurrent, maxCurrent] = this._currentFilter.price;\n    let [min, max] = filterPriceType;\n\n    if (min < this._minPriceInGoods) {\n      min = this._minPriceInGoods;\n    }\n\n    if (min > this._maxPriceInGoods) {\n      min = this._maxPriceInGoods;\n    }\n\n    if (min > maxCurrent) {\n      min = maxCurrent;\n    }\n\n    if (max < this._minPriceInGoods) {\n      max = this._minPriceInGoods;\n    }\n\n    if (max > this._maxPriceInGoods) {\n      max = this._maxPriceInGoods;\n    }\n\n    if (max < minCurrent) {\n      max = minCurrent;\n    }\n\n    this._filterModel.setFilter([min, max], `price`);\n  }\n}\n","import SiteMenuView from \"../view/site-menu.js\";\nimport {render, RenderPosition, remove} from \"../utils/render.js\";\n\nexport default class SiteMenu {\n  constructor(siteMenuContainer, siteMenuModel, basketModel) {\n    this._siteMenuContainer = siteMenuContainer;\n    this._siteMenuModel = siteMenuModel;\n    this._basketModel = basketModel;\n\n    this._handleSiteMenuChange = this._handleSiteMenuChange.bind(this);\n    this._handleModelEvent = this._handleModelEvent.bind(this);\n  }\n\n  init() {\n    this._siteMenuComponent = new SiteMenuView(this._basketModel.getBasket());\n    render(this._siteMenuContainer, this._siteMenuComponent, RenderPosition.AFTERBEGIN);\n\n    this._siteMenuComponent.setMenuClickHandler(this._handleSiteMenuChange);\n\n    this._siteMenuModel.addObserver(this._handleModelEvent);\n    this._basketModel.addObserver(this._handleModelEvent);\n  }\n\n  destroy() {\n    remove(this._siteMenuComponent);\n\n    this._siteMenuComponent = null;\n\n    this._siteMenuModel.removeObserver(this._handleModelEvent);\n    this._basketModel.removeObserver(this._handleModelEvent);\n  }\n\n  _handleModelEvent() {\n    this.destroy();\n    this.init();\n  }\n\n  _handleSiteMenuChange(menuItem) {\n    this._currentMenuItem = this._siteMenuModel.getMenuItem();\n\n    if (this._currentMenuItem === menuItem || menuItem === null) {\n      return;\n    }\n\n    this._siteMenuModel.setMenuItem(menuItem);\n  }\n}\n","export const filteredGoodsByType = (good, filters) => {\n  if (!filters.length) {\n    return true;\n  }\n  return filters.includes(good);\n};\n\nexport const filteredGoodsByPrice = (good, filters) => {\n  const keys = [`min`, `max`];\n  let PriceRange = {};\n\n  PriceRange = Object.assign(...keys.map((k, i) => ({[k]: filters[i]})));\n\n  if (!filters.length) {\n    return true;\n  }\n  return Number(good) <= PriceRange.max && Number(good) >= PriceRange.min;\n};\n","import {FilterType} from \"../const.js\";\n\nexport const getGuitarType = (type) => {\n  const guitarTypeKeys = Object.keys(FilterType);\n  const currentGuitarType = guitarTypeKeys.filter((key) => FilterType[key] === type).map((key) => key.toLocaleLowerCase());\n  return currentGuitarType;\n};\n\nexport const sortPriceDown = (pointA, pointB) => Number(pointA.price) > Number(pointB.price) ? -1 : 1;\nexport const sortPriceUp = (pointA, pointB) => Number(pointA.price) > Number(pointB.price) ? 1 : -1;\n\nexport const sortPopularityDown = (pointA, pointB) => Number(pointA.reviewAmount) > Number(pointB.reviewAmount) ? -1 : 1;\nexport const sortPopularityUp = (pointA, pointB) => Number(pointA.reviewAmount) > Number(pointB.reviewAmount) ? 1 : -1;\n","export default class Observer {\n  constructor() {\n    this._observers = [];\n  }\n\n  addObserver(observer) {\n    this._observers.push(observer);\n  }\n\n  removeObserver(observer) {\n    this._observers = this._observers.filter((existedObserver) => existedObserver !== observer);\n  }\n\n  _notify(event) {\n    this._observers.forEach((observer) => observer(event));\n  }\n}\n","import Abstract from \"../view/abstract.js\";\n\nexport const RenderPosition = {\n  AFTERBEGIN: `afterbegin`,\n  BEFOREEND: `beforeend`,\n  BEFOREBEGIN: `beforebegin`\n};\n\nexport const render = (container, child, place) => {\n  if (container instanceof Abstract) {\n    container = container.getElement();\n  }\n\n  if (child instanceof Abstract) {\n    child = child.getElement();\n  }\n\n  switch (place) {\n    case RenderPosition.AFTERBEGIN:\n      container.prepend(child);\n      break;\n    case RenderPosition.BEFOREEND:\n      container.append(child);\n      break;\n    case RenderPosition.BEFOREBEGIN:\n      container.before(child);\n      break;\n  }\n};\n\nexport const renderTemplate = (container, template, place) => {\n  if (container instanceof Abstract) {\n    container = container.getElement();\n  }\n\n  container.insertAdjacentHTML(place, template);\n};\n\nexport const createElement = (template) => {\n  const newElement = document.createElement(`div`);\n  newElement.innerHTML = template;\n\n  return newElement.firstChild;\n};\n\nexport const replace = (newChild, oldChild) => {\n  if (oldChild instanceof Abstract) {\n    oldChild = oldChild.getElement();\n  }\n\n  if (newChild instanceof Abstract) {\n    newChild = newChild.getElement();\n  }\n\n  const parent = oldChild.parentElement;\n\n  if (parent === null || oldChild === null || newChild === null) {\n    throw new Error(`Can't replace unexisting elements`);\n  }\n\n  parent.replaceChild(newChild, oldChild);\n};\n\nexport const remove = (component) => {\n  if (!(component instanceof Abstract)) {\n    throw new Error(`Can remove only components`);\n  }\n\n  component.getElement().remove();\n  component.removeElement();\n};\n","import {createElement} from \"../utils/render.js\";\n\nexport default class Abstract {\n  constructor() {\n    if (new.target === Abstract) {\n      throw new Error(`Can't instantiate Abstract, only concrete one.`);\n    }\n\n    this._element = null;\n    this._callback = {};\n  }\n\n  getTemplate() {\n    throw new Error(`Abstract method not implemented: getTemplate`);\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n","import SmartView from \"./smart.js\";\nimport {getGuitarType} from \"../utils/good.js\";\n\nconst createBasketItemElement = (data) => {\n  const {type, stringAmount, name, price, count} = data;\n\n  return `<li class=\"product__item\">\n          <div class=\"product__image-container\">\n            <picture>\n              <source type=\"image/webp\" srcset=\"img/guitar-${getGuitarType(type)}@1x.webp 1x, img/guitar-${getGuitarType(type)}@2x.webp 2x\">\n              <!-- 1х: 68px; 2x: 136px -->\n              <img src=\"img/guitar-${getGuitarType(type)}@1x.png\" srcset=\"img/guitar-${getGuitarType(type)}@1x.png 1x, img/guitar-${getGuitarType(type)}@2x.png 2x\" width=\"68\" height=\"190\" alt=\"Изображение товара\">\n            </picture>\n          </div>\n          <ul class=\"product__description-list\">\n            <li class=\"product__name\">Электрогитара ${name}</li>\n            <li class=\"product__identifer-number\">Артикул: ${count}</li>\n            <li class=\"product__type\">Электрогитара, ${stringAmount} струнная </li>\n          </ul>\n          <div class=\"product__price\"><p>${price.toLocaleString(`ru-RU`)} ₽</p></div>\n          <div class=\"product__quantity\">\n            <button class=\"product__quantity-button\" id=\"dec-button\" type=\"button\">-</button>\n            <input type=\"text\" value=\"${count}\" name=\"product-quantity\">\n            <button class=\"product__quantity-button\" id=\"inc-button\" type=\"button\">+</button>\n          </div>\n          <div class=\"product__price-total\">${(price * count).toLocaleString(`ru-RU`)} ₽</div>\n          <button class=\"product__delete\" type=\"button\">\n            <span class=\"visually-hidden\">Удалить товар</span>\n          </button>\n        </li>`;\n};\n\nexport default class BasketItem extends SmartView {\n  constructor(data) {\n    super();\n    this._data = data;\n\n    this._handleQuantityIncClick = this._handleQuantityIncClick.bind(this);\n    this._handleQuantityDecClick = this._handleQuantityDecClick.bind(this);\n    this._handleProductQuantityChangeHandle = this._handleProductQuantityChangeHandle.bind(this);\n    this._deleteClickHandler = this._deleteClickHandler.bind(this);\n\n    this._currentValueCount = this._data.count;\n\n    this.restoreHandlers();\n  }\n\n  getTemplate() {\n    return createBasketItemElement(this._data);\n  }\n\n  restoreHandlers() {\n    this.setQuantityIncHandle();\n    this.setQuantityDecHandle();\n  }\n\n  _handleQuantityIncClick(evt) {\n    evt.preventDefault();\n    this._currentValueCount = Number(this.getElement().querySelector(`input[name=product-quantity]`).value);\n    this._currentValueCount++;\n\n    this._callback.quantityIncClick(this._currentValueCount);\n  }\n\n  _handleQuantityDecClick() {\n    this._currentValueCount = Number(this.getElement().querySelector(`input[name=product-quantity]`).value);\n    this._currentValueCount--;\n\n    this._callback.quantityDecClick(this._currentValueCount);\n  }\n\n  _handleProductQuantityChangeHandle(evt) {\n    evt.preventDefault();\n    if (evt.target.value <= 0 || Number.isNaN(Number(evt.target.value)) || evt.target.value === ``) {\n      return this._callback.productQuantityChange(this._currentValueCount);\n    }\n\n    this._currentValueCount = Number(evt.target.value);\n\n    return this._callback.productQuantityChange(this._currentValueCount);\n  }\n\n  _deleteClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.deleteClick();\n  }\n\n  setQuantityIncHandle(callback) {\n    this._callback.quantityIncClick = callback;\n    this.getElement().querySelector(`#inc-button`).addEventListener(`click`, this._handleQuantityIncClick);\n  }\n\n  setQuantityDecHandle(callback) {\n    this._callback.quantityDecClick = callback;\n    this.getElement().querySelector(`#dec-button`).addEventListener(`click`, this._handleQuantityDecClick);\n  }\n\n  setProductQuantityChangeHandle(callback) {\n    this._callback.productQuantityChange = callback;\n    this.getElement().querySelector(`input[name=product-quantity]`).addEventListener(`change`, this._handleProductQuantityChangeHandle);\n  }\n\n  setDeleteClickHandler(callback) {\n    this._callback.deleteClick = callback;\n    this.getElement().querySelector(`.product__delete`).addEventListener(`click`, this._deleteClickHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {getGuitarType} from \"../utils/good.js\";\n\nconst createBasketPopUpDeleteElement = (data) => {\n  const {type, name, identiferNumber, stringAmount, price} = data;\n\n  return `<section class=\"modal\">\n  <div class=\"overlay\">\n    <div class=\"modal__popup\">\n      <h2 class=\"modal__title\">Удалить этот товар?</h2>\n\n      <div class=\"modal__content\">\n        <div class=\"modal__image-container\">\n          <picture>\n            <source type=\"image/webp\" srcset=\"img/guitar-${getGuitarType(type)}@1x.webp 1x, img/guitar-${getGuitarType(type)}@2x.webp 2x\">\n            <!-- 1х: 68px; 2x: 136px -->\n            <img src=\"img/guitar-${getGuitarType(type)}@1x.png\" srcset=\"img/guitar-${getGuitarType(type)}@1x.png 1x, img/guitar-${getGuitarType(type)}@2x.png 2x\" width=\"68\" height=\"190\" alt=\"Изображение товара\">\n          </picture>\n        </div>\n        <div class=\"modal__content-container\">\n          <ul class=\"modal__description-list\">\n            <li class=\"modal__name\">Гитара ${name}</li>\n            <li class=\"modal__identifer-number\">Артикул: ${identiferNumber}</li>\n            <li class=\"modal__type\">Электрогитара, ${stringAmount} струнная </li>\n          </ul>\n          <div class=\"modal__price\">Цена: ${price} ₽</div>\n        </div>\n        <div class=\"modal__buttons-wrapper modal__buttons-wrapper--basket\">\n          <button class=\"modal__button\">Удалить товар</button>\n          <button class=\"modal__button modal__button--to-shopping\">Продолжить покупки</button>\n        </div>\n        <button class=\"modal__close\" type=\"button\">\n          <span class=\"visually-hidden\">Закрыть</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</section>`;\n};\n\nexport default class CatalogPopUpDelete extends AbstractView {\n  constructor(data) {\n    super();\n    this._data = data;\n\n    this._deleteClickHandler = this._deleteClickHandler.bind(this);\n    this._closeClickHandler = this._closeClickHandler.bind(this);\n    this._toShoppingClickHandler = this._toShoppingClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createBasketPopUpDeleteElement(this._data);\n  }\n\n  _deleteClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.deleteClick();\n  }\n\n  _closeClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.closeClick();\n  }\n\n  _toShoppingClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.toShoppingClick();\n  }\n\n  setDeleteClickHandler(callback) {\n    this._callback.deleteClick = callback;\n    this.getElement().querySelector(`.modal__button`).addEventListener(`click`, this._deleteClickHandler);\n  }\n\n  setCloseClickHandler(callback) {\n    this._callback.closeClick = callback;\n    this.getElement().querySelector(`.modal__close`).addEventListener(`click`, this._closeClickHandler);\n  }\n\n  setToShoppingClickHandler(callback) {\n    this._callback.toShoppingClick = callback;\n    this.getElement().querySelector(`.modal__button--to-shoping`).addEventListener(`click`, this._toShoppingClickHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {DiscountType} from \"../const.js\";\n\nconst createBasketElement = (goods, discountType, isAvailable) => {\n  let totalPrice = 0;\n\n  const DISCOUNT = {\n    GITARAHIT_10_PERCENT: 0.9,\n    SUPERGITARA: 700,\n    GITARA2020: 3500,\n    GITARA2020_30_PERCENT: 0.7,\n  };\n\n  const getTotalPrice = () => {\n    if (goods.length !== 0) {\n      let goodPrice = [];\n\n      goods.forEach((good) => {\n        return goodPrice.push(good.price * good.count);\n      });\n\n      totalPrice = goodPrice.reduce((acc, price) => acc + price);\n    }\n    return totalPrice;\n  };\n\n  const getDiscountPrice = (type) => {\n    switch (type) {\n      case DiscountType.GITARAHIT:\n        getTotalPrice();\n        if (totalPrice > 0) {\n          return totalPrice * DISCOUNT.GITARAHIT_10_PERCENT;\n        }\n        break;\n      case DiscountType.SUPERGITARA:\n        getTotalPrice();\n        if (totalPrice > 0) {\n          return totalPrice - DISCOUNT.SUPERGITARA;\n        }\n        break;\n      case DiscountType.GITARA2020:\n        getTotalPrice();\n        if (totalPrice > 0) {\n          return (DISCOUNT.GITARA2020) <= totalPrice * DISCOUNT.GITARA2020_30_PERCENT ? totalPrice - DISCOUNT.GITARA2020 : totalPrice * DISCOUNT.GITARA2020_30_PERCENT;\n        }\n        break;\n      default:\n        getTotalPrice();\n        break;\n    }\n    return totalPrice.toLocaleString(`ru-RU`);\n  };\n\n  return `<section class=\"shopping-bag\">\n  <div class=\"shopping-bag__content\">\n    <div class=\"shopping-bag__product product\">\n      <ul class=\"product__list\">\n\n      </ul>\n    </div>\n    <div class=\"shopping-bag__order order\">\n      <div class=\"order__discount\">\n        <div class=\"order__discount-wrapper\">\n          <span class=\"order__discount-title\">Промокод на скидку</span>\n          <span class=\"order__discount-subtitle\">Введите свой промокод, если он у вас есть.</span>\n        </div>\n        <div class=\"order__discount-promo ${!isAvailable ? `order__discount-promo--error` : ``}\">\n          <input type=\"text\" name=\"order-discount-promo\" id=\"order-discount-promo\" placeholder=\"\" value=\"\">\n          <button type=\"button\">Применить купон</button>\n        </div>\n      </div>\n      <div class=\"order__to-order\">\n        <span>Всего: ${getDiscountPrice(discountType)} ₽</span>\n        <button type=\"button\">Оформить заказ</button>\n      </div>\n    </div>\n  </div>\n</section>`;\n};\n\nexport default class Basket extends AbstractView {\n  constructor(goods, discountType, isAvailable) {\n    super();\n    this._goods = goods;\n    this._discountType = discountType;\n    this._isAvailable = isAvailable;\n\n\n    this._discountClickHandler = this._discountClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createBasketElement(this._goods, this._discountType, this._isAvailable);\n  }\n\n  _discountClickHandler(evt) {\n    evt.preventDefault();\n    const discountType = this.getElement().querySelector(`input[name=order-discount-promo]`).value;\n\n    this._callback.discountClick(discountType);\n  }\n\n  setDiscountClickHandler(callback) {\n    this._callback.discountClick = callback;\n    this.getElement().querySelector(`.order__discount-promo button`).addEventListener(`click`, this._discountClickHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {MenuItem, BreadcrumbsItem, BreadcrumbsTitle} from \"../const.js\";\n\nconst createBreadcrumbsTemplate = (siteMenuItem) => {\n  const breadcrumbsElement = (element) => {\n    let title = ``;\n    switch (siteMenuItem) {\n      case MenuItem.CATALOG:\n        title = element.CATALOG;\n        return `<li class=\"breadcrumbs__item breadcrumbs__item--current\">\n                  <a class=\"breadcrumbs__link\">${title}</a>\n                </li>`;\n      case MenuItem.BASKET:\n        title = element.BASKET;\n        return `<li class=\"breadcrumbs__item\">\n                  <a href=\"#\" class=\"breadcrumbs__link\" data-breadcrumbs-type=\"${MenuItem.CATALOG}\">${element.CATALOG}</a>\n                </li>\n                <li class=\"breadcrumbs__item breadcrumbs__item--current\">\n                  <a class=\"breadcrumbs__link\">${title}</a>\n                </li>`;\n    }\n    return title;\n  };\n  const breadcrumbsTitle = (element) => {\n    let title = ``;\n    switch (siteMenuItem) {\n      case MenuItem.CATALOG:\n        title = element.CATALOG;\n        return title;\n      case MenuItem.BASKET:\n        title = element.BASKET;\n        return title;\n    }\n    return title;\n  };\n\n  return `<div><h2 class=\"page-main__title\">${breadcrumbsTitle(BreadcrumbsTitle)}</h2>\n  <ul class=\"breadcrumbs\">\n    <li class=\"breadcrumbs__item\">\n      <a href=\"#\" class=\"breadcrumbs__link\">Главная</a>\n    </li>\n\n      ${breadcrumbsElement(BreadcrumbsItem)}\n\n  </ul></div>`;\n};\n\nexport default class Breadcrumbs extends AbstractView {\n  constructor(siteMenuModel) {\n    super();\n    this._siteMenuModel = siteMenuModel;\n    this._breadcrumbsClickHandler = this._breadcrumbsClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createBreadcrumbsTemplate(this._siteMenuModel);\n  }\n\n  _breadcrumbsClickHandler(evt) {\n    evt.preventDefault();\n    if (evt.target.dataset.breadcrumbsType) {\n      this._callback.breadcrumbsClick(evt.target.dataset.breadcrumbsType);\n    }\n  }\n\n  setBreadcrumbsClickHandler(callback) {\n    this._callback.breadcrumbsClick = callback;\n    this.getElement().addEventListener(`click`, this._breadcrumbsClickHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\n\nconst createCatalogBoardTemplate = () => {\n  return `<div class=\"catalog__catalog-column\"></div>`;\n};\n\nexport default class catalogBoard extends AbstractView {\n  getTemplate() {\n    return createCatalogBoardTemplate();\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {getGuitarType} from \"../utils/good.js\";\n\nconst createCatalogItemElement = (data) => {\n  const {type, reviewAmount, name, price, starsCount} = data;\n\n  return (\n    `<li class=\"list__item\">\n      <picture>\n        <source type=\"image/webp\" srcset=\"img/guitar-${getGuitarType(type)}@1x.webp 1x, img/guitar-${getGuitarType(type)}@2x.webp 2x\">\n        <!-- 1х: 68px; 2x: 136px -->\n        <img src=\"img/guitar-${getGuitarType(type)}@1x.png\" srcset=\"img/guitar-${getGuitarType(type)}@1x.png 1x, img/guitar-${getGuitarType(type)}@2x.png 2x\" width=\"68\" height=\"190\" alt=\"Изображение товара\">\n      </picture>\n      <div class=\"list__rating rating\">\n        <div class=\"list__stars rating__stars\">\n          <span style=\"width: ${starsCount * 20}%;\"></span>\n          <span class=\"visually-hidden\">Rating</span>\n        </div>\n        <span class=\"rating__amount\">${reviewAmount}</span>\n      </div>\n      <div class=\"list__description-wrapper\">\n        <h3>${name}</h3>\n        <p>${price.toLocaleString(`ru-RU`)} ₽</p>\n      </div>\n      <div class=\"list__navigation-wrapper\">\n        <a href=\"\" class=\"catalog__button--info catalog__button\">Подробнее</a>\n        <a href=\"\" class=\"catalog__button--buy catalog__button\">Купить</a>\n      </div>\n    </li>`\n  );\n};\n\nexport default class CatalogItem extends AbstractView {\n  constructor(data) {\n    super();\n    this.data = data;\n\n    this._addClickHandler = this._addClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createCatalogItemElement(this.data);\n  }\n\n  _addClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.addClick();\n  }\n\n  setAddClickHandler(callback) {\n    this._callback.addClick = callback;\n    this.getElement().querySelector(`.catalog__button--buy`).addEventListener(`click`, this._addClickHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\n\nconst createCatalogListElement = () => {\n  return (\n    `<ul class=\"catalog__list list\"></ul>`\n  );\n};\n\nexport default class CatalogList extends AbstractView {\n  getTemplate() {\n    return createCatalogListElement();\n  }\n}\n","import AbstractView from \"./abstract.js\";\n\nconst createCatalogPaginationElement = (goodsCount, goodsCountPerStep, paginationStep) => {\n  const paginationCount = Math.ceil(goodsCount / goodsCountPerStep);\n  const paginationRange = 4;\n\n  const renderPagination = () => {\n    let paginationItems = [];\n    let temp = ``;\n    for (let i = 1; i <= paginationCount; i++) {\n      temp = `<li class=\"pagination__item ${i === paginationStep ? `pagination__item--current` : ``}\"><a>${i}</a></li>`;\n      paginationItems.push(temp);\n    }\n\n    if (paginationRange >= paginationCount) {\n      return paginationItems.slice(0, paginationCount).join(``);\n    }\n\n    if (paginationRange < paginationCount) {\n      let paginationDots = [`<li class=\"pagination__item\"><a>...</a></li>`];\n      let count = paginationStep - 1;\n\n      if (paginationStep < 2) {\n        paginationItems = [\n          ...paginationItems.slice(0, paginationStep + 1),\n          paginationDots,\n          ...paginationItems.slice(paginationCount - 1, paginationCount)\n        ].join(``);\n\n        return paginationItems;\n      }\n\n      if (paginationStep === 2) {\n        paginationItems = [\n          ...paginationItems.slice(count - 1, paginationStep),\n          paginationDots,\n          ...paginationItems.slice(paginationCount - 1, paginationCount)\n        ].join(``);\n\n        return paginationItems;\n      }\n\n      if (paginationCount - paginationStep < paginationRange - 1) {\n        paginationItems = [\n          ...paginationItems.slice(paginationCount - paginationRange, paginationCount)\n        ].join(``);\n\n        return paginationItems;\n      }\n\n      paginationItems = [\n        ...paginationItems.slice(count - 1, paginationStep),\n        paginationDots,\n        ...paginationItems.slice(paginationCount - 1, paginationCount)\n      ].join(``);\n\n      return paginationItems;\n    }\n    return paginationItems.join(``);\n  };\n\n  return `<ul class=\"catalog__pagination pagination\">\n    <li class=\"pagination__item pagination__item--button pagination__item--button-previous\">\n      <a href=\"#\">Назад</a>\n    </li>\n    ${renderPagination()}\n    <li class=\"pagination__item pagination__item--button pagination__item--button-next\">\n      <a href=\"#\">Далее</a>\n    </li>\n  </ul>`;\n};\n\nexport default class CatalogPagination extends AbstractView {\n  constructor(goodsCount, goodsCountPerStep, paginationStep) {\n    super();\n    this._goodsCount = goodsCount;\n    this._goodsCountPerStep = goodsCountPerStep;\n    this._paginationStep = paginationStep;\n\n    this._nextClickHandler = this._nextClickHandler.bind(this);\n    this._previousClickHandler = this._previousClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createCatalogPaginationElement(this._goodsCount, this._goodsCountPerStep, this._paginationStep);\n  }\n\n  _nextClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.nextClick();\n  }\n\n  _previousClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.previousClick();\n  }\n\n  setNextClickHandler(callback) {\n    this._callback.nextClick = callback;\n    this.getElement().querySelector(`.pagination__item--button-next`).addEventListener(`click`, this._nextClickHandler);\n  }\n\n  setPreviousClickHandler(callback) {\n    this._callback.previousClick = callback;\n    this.getElement().querySelector(`.pagination__item--button-previous`).addEventListener(`click`, this._previousClickHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {getGuitarType} from \"../utils/good.js\";\n\nconst createCatalogPopUpAddElement = (data) => {\n  const {name, identiferNumber, stringAmount, price, type} = data;\n\n  return `<section class=\"modal\">\n    <div class=\"overlay\">\n      <div class=\"modal__popup\">\n        <h2 class=\"modal__title\">Добавить товар в корзину</h2>\n\n        <div class=\"modal__content\">\n          <div class=\"modal__image-container\">\n            <picture>\n              <source type=\"image/webp\" srcset=\"img/guitar-${getGuitarType(type)}@1x.webp 1x, img/guitar-${getGuitarType(type)}@2x.webp 2x\">\n              <!-- 1х: 68px; 2x: 136px -->\n              <img src=\"img/guitar-${getGuitarType(type)}@1x.png\" srcset=\"img/guitar-${getGuitarType(type)}@1x.png 1x, img/guitar-${getGuitarType(type)}@2x.png 2x\" width=\"68\" height=\"190\" alt=\"Изображение товара\">\n            </picture>\n          </div>\n          <div class=\"modal__content-container\">\n            <ul class=\"modal__description-list\">\n              <li class=\"modal__name\">Гитара ${name}</li>\n              <li class=\"modal__identifer-number\">Артикул: ${identiferNumber}</li>\n              <li class=\"modal__type\">Электрогитара, ${stringAmount} струнная </li>\n            </ul>\n            <div class=\"modal__price\">Цена: ${price} ₽</div>\n          </div>\n          <button class=\"modal__button\">Добавить в корзину</button>\n          <button class=\"modal__close\" type=\"button\">\n            <span class=\"visually-hidden\">Закрыть</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </section>`;\n};\n\nexport default class CatalogPopUpAdd extends AbstractView {\n  constructor(data) {\n    super();\n    this._data = data;\n\n    this._addClickHandler = this._addClickHandler.bind(this);\n    this._closeClickHandler = this._closeClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createCatalogPopUpAddElement(this._data);\n  }\n\n  _addClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.addClick(this._data);\n  }\n\n  _closeClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.closeClick();\n  }\n\n  setAddClickHandler(callback) {\n    this._callback.addClick = callback;\n    this.getElement().querySelector(`.modal__button`).addEventListener(`click`, this._addClickHandler);\n  }\n\n  setCloseClickHandler(callback) {\n    this._callback.closeClick = callback;\n    this.getElement().querySelector(`.modal__close`).addEventListener(`click`, this._closeClickHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {MenuItem} from \"../const.js\";\n\nconst createCatalogPopUpSuccessElement = () => {\n  return `<section class=\"modal\">\n  <div class=\"overlay\">\n    <div class=\"modal__popup\">\n      <h2 class=\"modal__title\">Товар успешно добавлен в корзину</h2>\n\n      <div class=\"modal__content\">\n        <div class=\"modal__buttons-wrapper\">\n          <button class=\"modal__button modal__button--to-basket\" data-menu-type=\"${MenuItem.BASKET}\">Перейти в корзину</button>\n          <button class=\"modal__button modal__button--to-shopping\">Продолжить покупки</button>\n        </div>\n        <button class=\"modal__close\" type=\"button\">\n          <span class=\"visually-hidden\">Закрыть</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</section>`;\n};\n\nexport default class CatalogPopUpSuccess extends AbstractView {\n  constructor() {\n    super();\n\n    this._toBasketClickHandler = this._toBasketClickHandler.bind(this);\n    this._toShoppingClickHandler = this._toShoppingClickHandler.bind(this);\n    this._closeClickHandler = this._closeClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createCatalogPopUpSuccessElement();\n  }\n\n  _toBasketClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.toBasketClick(evt.target.dataset.menuType);\n  }\n\n  _toShoppingClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.toShoppingClick();\n  }\n\n  _closeClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.closeClick();\n  }\n\n  setToBasketClickHandler(callback) {\n    this._callback.toBasketClick = callback;\n    this.getElement().querySelector(`.modal__button--to-basket`).addEventListener(`click`, this._toBasketClickHandler);\n  }\n\n  setToShoppingClickHandler(callback) {\n    this._callback.toShoppingClick = callback;\n    this.getElement().querySelector(`.modal__button--to-shopping`).addEventListener(`click`, this._toShoppingClickHandler);\n  }\n\n  setCloseClickHandler(callback) {\n    this._callback.closeClick = callback;\n    this.getElement().querySelector(`.modal__close`).addEventListener(`click`, this._closeClickHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\n\nconst createCatalogSectionWrapperElement = () => {\n  return `<div class=\"catalog__content-wrapper\">\n    </div>`;\n};\n\nexport default class CatalogSectionWrapper extends AbstractView {\n  getTemplate() {\n    return createCatalogSectionWrapperElement();\n  }\n}\n","import AbstractView from \"./abstract.js\";\n\nconst createCatalogSectionElement = () => {\n  return `<section class=\"catalog\"></section>`;\n};\n\nexport default class CatalogSection extends AbstractView {\n  getTemplate() {\n    return createCatalogSectionElement();\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {SortByCategoryType, SortByPriorityType} from \"../const.js\";\n\nconst createCatalogSortElement = (currentSortByCategoryType, currentSortByPriorityType) => {\n  return (\n    `<div class=\"catalog__sort-wrapper\">\n      <span>Сортировать:</span>\n      <ul class=\"catalog__sort sort\">\n        <li class=\"sort__item ${currentSortByCategoryType === SortByCategoryType.PRICE ? `sort__item--active` : ``}\">\n          <a\n            href=\"#\"\n            data-sort-by-category=\"${SortByCategoryType.PRICE}\">по цене\n          </a>\n        </li>\n        <li class=\"sort__item ${currentSortByCategoryType === SortByCategoryType.POPULARITY ? `sort__item--active` : ``}\">\n          <a\n            href=\"#\"\n            data-sort-by-category=\"${SortByCategoryType.POPULARITY}\">по популярности\n          </a>\n        </li>\n      </ul>\n      <div class=\"catalog__sort-buttons\">\n        <a href=\"#\"\n          class=\"sort-button sort-button--up ${currentSortByPriorityType === SortByPriorityType.UP ? `sort-button--active` : ``}\"\n          data-sort-by-priority=\"${SortByPriorityType.UP}\">\n            <span class=\"visually-hidden\">Сортировать по возрастанию</span>\n            <svg width=\"22\" height=\"22\">\n              <use xlink:href=\"img/sprite/sprite.svg#sprite-icon_arrow-up\"></use>\n            </svg>\n        </a>\n        <a href=\"#\"\n          class=\"sort-button sort-button--down ${currentSortByPriorityType === SortByPriorityType.DOWN ? `sort-button--active` : ``}\"\n          data-sort-by-priority=\"${SortByPriorityType.DOWN}\">\n          <span class=\"visually-hidden\">Сортировать по убыванию</span>\n          <svg width=\"22\" height=\"22\">\n            <use xlink:href=\"img/sprite/sprite.svg#sprite-icon_arrow-up\"></use>\n          </svg>\n        </a>\n      </div>\n    </div>`\n  );\n};\nexport default class CatalogSort extends AbstractView {\n  constructor(sortByCategory, sortByPriority) {\n    super();\n    this._currentSortByCategory = sortByCategory;\n    this._currentSortByPriority = sortByPriority;\n    this._sortByCategoryChangeHandler = this._sortByCategoryChangeHandler.bind(this);\n    this._sortByPriorityChangeHandler = this._sortByPriorityChangeHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createCatalogSortElement(this._currentSortByCategory, this._currentSortByPriority);\n  }\n\n  _sortByCategoryChangeHandler(evt) {\n    evt.preventDefault();\n    this._callback.sortByCategoryChange(evt.target.dataset.sortByCategory);\n  }\n\n  _sortByPriorityChangeHandler(evt) {\n    evt.preventDefault();\n    this._callback.sortByPriorityChange(evt.target.parentNode.dataset.sortByPriority);\n  }\n\n  setSortByCategoryChangeHandler(callback) {\n    this._callback.sortByCategoryChange = callback;\n    this.getElement().querySelector(`.catalog__sort`).addEventListener(`click`, this._sortByCategoryChangeHandler);\n  }\n\n  setSortByPriorityChangeHandler(callback) {\n    this._callback.sortByPriorityChange = callback;\n    this.getElement().querySelector(`.catalog__sort-buttons`).addEventListener(`click`, this._sortByPriorityChangeHandler, true);\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {FilterType, FilterStringAmount, StringsAmountByType} from \"../const.js\";\nimport {filteredGoodsByPrice} from \"../utils/filter.js\";\n\nconst createFiltersElement = (currentFilter, goods) => {\n  let [currentFrom, currentTo] = currentFilter.price;\n  let filteredGuitarsByType = {};\n  let stringAmountAvailableList = [];\n  // let guitarAmountAvailableList = [];\n  // let pricesInGoods = [];\n\n  if (currentFilter.type.length === 0) {\n    filteredGuitarsByType = goods\n        .filter((item) => filteredGoodsByPrice(item.type, currentFilter.type));\n\n    stringAmountAvailableList = Array.from(new Set(filteredGuitarsByType\n        .map((item) => item.stringAmount)));\n  }\n\n  filteredGuitarsByType = currentFilter.type;\n\n  const guitarKeys = Object.keys(FilterType);\n  const stringKeys = Object.keys(FilterStringAmount);\n\n  let typeGuitarKeys = [];\n  let typeGuitarValues = [];\n  let typeStringsValues = [];\n\n  // pricesInGoods = goods\n  //     .map((item) => item.price);\n\n  // const minPriceInGoods = Math.min(...pricesInGoods);\n  // const maxPriceInGoods = Math.max(...pricesInGoods);\n\n  // if (currentFilter.price.length === 0) {\n  //   currentFrom = minPriceInGoods;\n  //   currentTo = maxPriceInGoods;\n  // }\n\n\n  // if (currentFrom > currentTo) {\n  //   if (currentFrom > maxPriceInGoods) {\n  //     console.log(`object`);\n  //     currentTo = maxPriceInGoods;\n  //   } else {\n  //     console.log(`object`);\n  //     currentFrom = currentTo;\n  //   }\n  // }\n\n  // if (currentFrom < minPriceInGoods) {\n  //   currentFrom = minPriceInGoods;\n  // }\n\n  // if (currentTo < currentFrom) {\n  //   if (currentTo < minPriceInGoods) {\n  //     currentTo = minPriceInGoods;\n  //     console.log(`object`);\n  //   } else {\n  //     currentTo = currentFrom;\n  //   }\n  // }\n\n  // const getCurrentFrom = (from) => {\n  // if (currentFilter.price.length === 0) {\n  //   console.log(`1`);\n  //   from = minPriceInGoods;\n  //   return from;\n  // }\n  //   if (currentFilter.price.length === 0 || from < minPriceInGoods || Number.isNaN(from)) {\n  //     from = minPriceInGoods;\n  //     return from;\n  //   }\n  //   if (from > currentTo) {\n  //     if (from > maxPriceInGoods) {\n  //       currentTo = maxPriceInGoods;\n  //     } else {\n  //       from = currentTo;\n  //     }\n  //   }\n\n  //   return from;\n  // };\n\n  // console.log(getCurrentFrom(currentFrom));\n  // console.log(currentFrom);\n  // console.log(currentTo);\n\n  // if (currentFrom < minPriceInGoods || Number.isNaN(currentFrom)) {\n  //   currentFrom = minPriceInGoods;\n  // }\n\n  // if (currentTo > maxPriceInGoods || Number.isNaN(currentTo)) {\n  //   currentTo = maxPriceInGoods;\n  // }\n\n  // guitarAmountAvailableList = Array.from(new Set(goods\n  //     .map((item) => item.type)));\n\n\n  // stringAmountAvailableList = Array.from(new Set(goods\n  //     .map((item) => item.stringAmount)));\n\n  guitarKeys.filter((key) => (currentFilter.type.forEach((type) => {\n    if (type.includes(FilterType[key])) {\n      return typeGuitarKeys.push(key);\n    } else {\n      return false;\n    }\n  })));\n\n  guitarKeys.filter((key) => (currentFilter.type.forEach((type) => {\n    if (type.includes(FilterType[key])) {\n      return typeGuitarValues.push(FilterType[key]);\n    } else {\n      return false;\n    }\n  })));\n\n  stringKeys.filter((key) => (currentFilter.stringAmount.forEach((type) => {\n    if (FilterStringAmount[key] === type) {\n      return typeStringsValues.push(FilterStringAmount[key]);\n    } else {\n      return false;\n    }\n  })));\n\n\n  typeGuitarKeys.forEach((item) => {\n    stringAmountAvailableList.push(...StringsAmountByType[item]);\n    return stringAmountAvailableList;\n  });\n\n  stringAmountAvailableList = Array.from(new Set(stringAmountAvailableList));\n\n  const isAvailable = (availableList, data) => {\n    return availableList.includes(data);\n  };\n  // value=\"${currentFrom.toLocaleString(`ru-RU`)}\"\n\n  return (`<div class=\"catalog__filters-column\">\n  <h2>Фильтр</h2>\n  <form class=\"catalog__filters-form\" action=\"#\" method=\"GET\">\n      <fieldset class=\"catalog__filters-price-change\">\n        <h3>Цена, ₽</h3>\n        <div class=\"catalog__filters-price-wrapper\">\n          <input\n              type=\"text\"\n              name=\"filters-form-price-from\"\n              id=\"filters-form-price-from\"\n              placeholder=\"${currentFrom.toLocaleString(`ru-RU`)}\"\n              value=\"${currentFrom.toLocaleString(`ru-RU`)}\"\n              min=\"0\"\n              max=\"1000000\"\n              >\n          <input\n              type=\"text\"\n              name=\"filters-form-price-to\"\n              id=\"filters-form-price-to\"\n              placeholder=\"${currentTo.toLocaleString(`ru-RU`)}\"\n              value=\"${currentTo.toLocaleString(`ru-RU`)}\"\n              min=\"0\"\n              max=\"1000000\"\n              >\n        </div>\n      </fieldset>\n      <fieldset class=\"catalog__filters-type-guitar\">\n        <h3>Тип гитар</h3>\n        <div class=\"catalog__filters-type-wrapper\">\n          <div class=\"catalog__filters-type-content-wrapper\">\n            <input\n                class=\"visually-hidden\"\n                type=\"checkbox\"\n                name=\"filters-form-type\"\n                id=\"filters-form-type-value-1\"\n                data-filter-type-guitar=\"${FilterType.ACOUSTIC}\"\n                ${isAvailable(typeGuitarValues, FilterType.ACOUSTIC) ? `checked` : ``}\n                >\n            <label for=\"filters-form-type-value-1\">Акустические гитары</label>\n          </div>\n          <div class=\"catalog__filters-type-content-wrapper\">\n            <input\n                class=\"visually-hidden\"\n                type=\"checkbox\"\n                name=\"filters-form-type\"\n                id=\"filters-form-type-value-2\"\n                data-filter-type-guitar=\"${FilterType.ELECTRIC}\"\n                ${isAvailable(typeGuitarValues, FilterType.ELECTRIC) ? `checked` : ``}\n                >\n            <label for=\"filters-form-type-value-2\">Электрогитары</label>\n          </div>\n          <div class=\"catalog__filters-type-content-wrapper\">\n            <input\n                class=\"visually-hidden\"\n                type=\"checkbox\"\n                name=\"filters-form-type\"\n                id=\"filters-form-type-value-3\"\n                data-filter-type-guitar=\"${FilterType.UKULELE}\"\n                ${isAvailable(typeGuitarValues, FilterType.UKULELE) ? `checked` : ``}\n                >\n            <label for=\"filters-form-type-value-3\">Укулеле</label>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset class=\"catalog__filters-string-amount\">\n        <h3>Количество струн</h3>\n        <div class=\"catalog__filters-amount-wrapper\">\n          <input\n              class=\"visually-hidden\"\n              type=\"checkbox\"\n              name=\"filters-form-amount\"\n              id=\"4\"\n              data-filter-amount-strings=\"${FilterStringAmount.FOUR}\"\n              ${isAvailable(typeStringsValues, FilterStringAmount.FOUR) ? `checked` : ``}\n              ${isAvailable(stringAmountAvailableList, FilterStringAmount.FOUR) ? `` : `disabled`}\n              >\n          <label for=\"4\">4</label>\n          <input\n              class=\"visually-hidden\"\n              type=\"checkbox\"\n              name=\"filters-form-amount\"\n              id=\"6\"\n              data-filter-amount-strings=\"${FilterStringAmount.SIX}\"\n              ${isAvailable(typeStringsValues, FilterStringAmount.SIX) ? `checked` : ``}\n              ${isAvailable(stringAmountAvailableList, FilterStringAmount.SIX) ? `` : `disabled`}\n              >\n          <label for=\"6\">6</label>\n          <input\n              class=\"visually-hidden\"\n              type=\"checkbox\"\n              name=\"filters-form-amount\"\n              id=\"7\"\n              data-filter-amount-strings=\"${FilterStringAmount.SEVEN}\"\n              ${isAvailable(typeStringsValues, FilterStringAmount.SEVEN) ? `checked` : ``}\n              ${isAvailable(stringAmountAvailableList, FilterStringAmount.SEVEN) ? `` : `disabled`}\n              >\n          <label for=\"7\">7</label>\n          <input\n              class=\"visually-hidden\"\n              type=\"checkbox\"\n              name=\"filters-form-amount\"\n              id=\"12\"\n              data-filter-amount-strings=\"${FilterStringAmount.TWELVE}\"\n              ${isAvailable(typeStringsValues, FilterStringAmount.TWELVE) ? `checked` : ``}\n              ${isAvailable(stringAmountAvailableList, FilterStringAmount.TWELVE) ? `` : `disabled`}\n              >\n          <label for=\"12\">12</label>\n        </div>\n      </fieldset>\n    </form></div>`);\n};\n\nexport default class Filters extends AbstractView {\n  constructor(currentFilter, goods) {\n    super();\n    this._currentFilter = currentFilter;\n    this._goods = goods;\n\n    this._filterPriceChangeHandler = this._filterPriceChangeHandler.bind(this);\n    this._filterGuitarTypeChangeHandler = this._filterGuitarTypeChangeHandler.bind(this);\n    this._filterStringAmountChangeHandler = this._filterStringAmountChangeHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createFiltersElement(this._currentFilter, this._goods);\n  }\n\n  _filterGuitarTypeChangeHandler(evt) {\n    evt.preventDefault();\n    let optionsGuitarTypeArray = [];\n\n    document.querySelectorAll(`input[type='checkbox']`)\n        .forEach((checkbox) => checkbox.checked === true && !checkbox.dataset.filterAmountStrings ? optionsGuitarTypeArray\n            .push(checkbox.dataset.filterTypeGuitar) : null);\n\n    this._callback.filterTypeChange(optionsGuitarTypeArray);\n  }\n\n  _filterStringAmountChangeHandler(evt) {\n    evt.preventDefault();\n    let optionsStringAmountArray = [];\n\n    document.querySelectorAll(`input[type='checkbox']`)\n        .forEach((checkbox) => checkbox.checked === true && !checkbox.dataset.filterTypeGuitar ? optionsStringAmountArray\n            .push(checkbox.dataset.filterAmountStrings) : null);\n\n    this._callback.filterStringChange(optionsStringAmountArray);\n  }\n\n  _filterPriceChangeHandler(evt) {\n    evt.preventDefault();\n    const value = parseInt(String(evt.target.value).replace(/\\s+/g, ``), 10);\n\n    if (value <= 0 || Number.isNaN(Number(value)) || value === ``) {\n      return this._callback.filterPriceChange(this._currentFilter.price);\n    }\n\n    let optionsPriceChangeArray = [];\n\n    document.querySelectorAll(`.catalog__filters-price-wrapper input[type='text']`)\n        .forEach((input) => optionsPriceChangeArray\n            .push(input.value));\n\n    return this._callback.filterPriceChange(optionsPriceChangeArray);\n  }\n\n  setFilterTypeChangeHandler(callback) {\n    this._callback.filterTypeChange = callback;\n    this.getElement().querySelector(`.catalog__filters-type-guitar`).addEventListener(`change`, this._filterGuitarTypeChangeHandler);\n  }\n\n  setFilterStringChangeHandler(callback) {\n    this._callback.filterStringChange = callback;\n    this.getElement().querySelector(`.catalog__filters-string-amount`).addEventListener(`change`, this._filterStringAmountChangeHandler);\n  }\n\n  setFilterPriceChangeHandler(callback) {\n    this._callback.filterPriceChange = callback;\n    this.getElement().querySelector(`.catalog__filters-price-change`).addEventListener(`change`, this._filterPriceChangeHandler);\n  }\n}\n","import AbstractView from \"./abstract.js\";\nimport {MenuItem} from \"../const.js\";\n\nconst createSiteMenuTemplate = (basketModel) => {\n  const goodsInBasket = basketModel;\n\n  let goodsCount = 0;\n  if (goodsInBasket.length !== 0) {\n    goodsCount = goodsInBasket.map((good) => good.count)\n        .reduce((total, count) => total + count);\n  }\n  return `<nav class=\"main-nav\">\n    <div class=\"container\">\n      <div class=\"main-nav__wrapper\">\n        <a class=\"main-nav__logo\">\n          <svg width=\"67\" height=\"70\">\n            <use xlink:href=\"img/sprite/sprite.svg#sprite-logo\"></use>\n          </svg>\n        </a>\n        <ul class=\"main-nav__list site-list\">\n          <li class=\"site-list__item\">\n            <a href=\"#\" data-menu-type=\"${MenuItem.CATALOG}\">Каталог</a>\n          </li>\n          <li class=\"site-list__item\">\n            <a href=\"#\">Где купить?</a>\n          </li>\n          <li class=\"site-list__item\">\n            <a href=\"#\">О компании</a>\n          </li>\n          <li class=\"site-list__item\">\n            <a href=\"#\">Cервис-центры</a>\n          </li>\n        </ul>\n        <ul class=\"main-nav__list user-list\">\n          <li class=\"user-list__item user-list__item--location\">\n            <a href=\"#\">\n              <span class=\"visually-hidden\">Локация</span>\n              <svg width=\"14\" height=\"17\">\n                <use xlink:href=\"img/sprite/sprite.svg#sprite-icon_location\"></use>\n              </svg>\n            </a>\n          </li>\n          <li class=\"user-list__item user-list__item--search\">\n            <a href=\"#\">\n              <span class=\"visually-hidden\">Поиск по сайту</span>\n              <svg width=\"14\" height=\"14\">\n                <use xlink:href=\"img/sprite/sprite.svg#sprite-icon_search\"></use>\n              </svg>\n            </a>\n          </li>\n          <li class=\"user-list__item user-list__item--basket\">\n            <a href=\"#\" data-menu-type=\"${MenuItem.BASKET}\">\n              <span class=\"visually-hidden\">Корзина</span>\n              <svg width=\"16\" height=\"18\">\n                <use xlink:href=\"img/sprite/sprite.svg#sprite-icon_basket\"></use>\n              </svg>\n            </a>\n            <span class=\"\" data-title=\"${goodsInBasket.length === 0 ? `` : goodsCount}\"></span>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </nav>`;\n};\n\nexport default class SiteMenu extends AbstractView {\n  constructor(basketModel) {\n    super();\n\n    this._basketModel = basketModel;\n    this._menuClickHandler = this._menuClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createSiteMenuTemplate(this._basketModel);\n  }\n\n  _menuClickHandler(evt) {\n    evt.preventDefault();\n    if (evt.target.tagName !== `A`) {\n      return this._callback.menuClick(evt.target.parentNode.dataset.menuType);\n    }\n    return this._callback.menuClick(evt.target.dataset.menuType);\n  }\n\n  setMenuClickHandler(callback) {\n    this._callback.menuClick = callback;\n    this.getElement().addEventListener(`click`, this._menuClickHandler);\n  }\n}\n","import Abstract from \"./abstract\";\n\nexport default class Smart extends Abstract {\n  constructor() {\n    super();\n    this._data = {};\n  }\n\n  updateData(update, justDataUpdating) {\n    if (!update) {\n      return;\n    }\n\n    this._data = Object.assign(\n        {},\n        this._data,\n        update\n    );\n\n    if (justDataUpdating) {\n      return;\n    }\n\n    this.updateElement();\n  }\n\n  updateElement() {\n    const prevElement = this.getElement();\n\n    const parent = prevElement.parentElement;\n    this.removeElement();\n\n    const newElement = this.getElement();\n\n    parent.replaceChild(newElement, prevElement);\n\n    this.restoreHandlers();\n  }\n\n  restoreHandlers() {\n    throw new Error(`Abstract method not implemented: resetHandlers`);\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n// It's empty as some runtime module handles the default behavior\n__webpack_require__.x = function() {};\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"main\": 0\n};\n\nvar deferredModules = [\n\t[\"../node_modules/@babel/polyfill/lib/index.js\",\"vendors\"],\n\t[\"./js/main.js\",\"vendors\"]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = function() {};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tvar executeModules = data[3];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk\"] = self[\"webpackChunk\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = function() {};\n\t}\n\treturn result;\n}\nvar startup = __webpack_require__.x;\n__webpack_require__.x = function() {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = startup || (function() {});\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};","// run startup\n__webpack_require__.x();\n"],"sourceRoot":""}